<flex-row *ngIf="user">
  <flex-row-item class="setting-title">
    <legend>{{ 'label.title.medicalhistory' | languageTransform: 'System' | async }}</legend>
    <kendo-button *ngIf="readOnly" (click)="readOnly = false" class="edit-btn">
      {{ 'button.title.edit' | languageTransform: 'System' | async }}
    </kendo-button>
    <kendo-button
      *ngIf="!readOnly"
      class="save-btn"
      themeColor="success"
      (click)="onSave()"
      [disabled]="!enableSaveBtn || requesting">
      {{ 'button.title.save' | languageTransform: 'System' | async }}
    </kendo-button>
  </flex-row-item>
</flex-row>

<flex-col class="medical-history-container" *ngIf="user && !requesting && !readOnly">
  <!-- Cardiovasular -->
  <medical-histroy-list
    system="Cardiovascular"
    [title]="medical.cardiovascular.title"
    [selection]="medical.cardiovascular.list"
    [(userList)]="user.setting.medical.symptomsAndDiseases"
    [readOnly]="readOnly"
    [isClient]="true"></medical-histroy-list>

  <!-- Digestive -->
  <medical-histroy-list
    system="Digestive"
    [title]="medical.digestive.title"
    [selection]="medical.digestive.list"
    [(userList)]="user.setting.medical.symptomsAndDiseases"
    [readOnly]="readOnly"
    [isClient]="true"></medical-histroy-list>

  <!-- Endocrine -->
  <medical-histroy-list
    system="Endocrine"
    [title]="medical.endocrine.title"
    [selection]="medical.endocrine.list"
    [(userList)]="user.setting.medical.symptomsAndDiseases"
    [readOnly]="readOnly"
    [isClient]="true"></medical-histroy-list>

  <!-- Integumentary -->
  <medical-histroy-list
    system="Integumentary"
    [title]="medical.integumentary.title"
    [selection]="medical.integumentary.list"
    [(userList)]="user.setting.medical.symptomsAndDiseases"
    [readOnly]="readOnly"
    [isClient]="true"></medical-histroy-list>

  <!-- Lymphatic -->
  <medical-histroy-list
    system="Lymphatic"
    [title]="medical.lymphatic.title"
    [selection]="medical.lymphatic.list"
    [(userList)]="user.setting.medical.symptomsAndDiseases"
    [readOnly]="readOnly"
    [isClient]="true"></medical-histroy-list>

  <!-- Muscular -->
  <medical-histroy-list
    system="Muscular"
    [title]="medical.muscular.title"
    [selection]="medical.muscular.list"
    [(userList)]="user.setting.medical.symptomsAndDiseases"
    [readOnly]="readOnly"
    [isClient]="true"></medical-histroy-list>

  <!-- Nervous -->
  <medical-histroy-list
    system="Nervous"
    [title]="medical.nervous.title"
    [selection]="medical.nervous.list"
    [(userList)]="user.setting.medical.symptomsAndDiseases"
    [readOnly]="readOnly"
    [isClient]="true"></medical-histroy-list>

  <!-- Reproductive -->
  <medical-histroy-list
    system="Reproductive"
    [title]="medical.reproductive.title"
    [selection]="medical.reproductive.list"
    [(userList)]="user.setting.medical.symptomsAndDiseases"
    [readOnly]="readOnly"
    [isClient]="true"></medical-histroy-list>

  <!-- Respiratory -->
  <medical-histroy-list
    system="Respiratory"
    [title]="medical.respiratory.title"
    [selection]="medical.respiratory.list"
    [(userList)]="user.setting.medical.symptomsAndDiseases"
    [readOnly]="readOnly"
    [isClient]="true"></medical-histroy-list>

  <!-- Skeletal -->
  <medical-histroy-list
    system="Skeletal"
    [title]="medical.skeletal.title"
    [selection]="medical.skeletal.list"
    [(userList)]="user.setting.medical.symptomsAndDiseases"
    [readOnly]="readOnly"
    [isClient]="true"></medical-histroy-list>

  <!-- Urinary -->
  <medical-histroy-list
    system="Urinary"
    [title]="medical.urinary.title"
    [selection]="medical.urinary.list"
    [(userList)]="user.setting.medical.symptomsAndDiseases"
    [readOnly]="readOnly"
    [isClient]="true"></medical-histroy-list>
</flex-col>

<flex-col *ngIf="user && !requesting && readOnly">
  <flex-col-item class="user-active-medical-history" *ngIf="user.setting.medical.symptomsAndDiseases.length > 0">
    <ng-container *ngFor="let history of user.setting.medical.symptomsAndDiseases">
      <medical-histroy-chip [active]="false" [history]="history"></medical-histroy-chip>
    </ng-container>
  </flex-col-item>
  <flex-col-item class="user-active-medical-history" *ngIf="!user.setting.medical.symptomsAndDiseases.length">
    <p class="default-placeholder">
      {{ 'label.description.thereisnorelatedmedicalhistory' | languageTransform: 'System' | async }}
    </p>
  </flex-col-item>
</flex-col>

<flex-col>
  <flex-col-item>
    <kendo-loader *ngIf="requesting" size="large"></kendo-loader>
  </flex-col-item>
</flex-col>
